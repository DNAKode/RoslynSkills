# Do-Now DAG (2026-02-18)

Date: 2026-02-18  
Owner: active coding session  
Status: execution artifact (short-horizon)

## Problem Statement

We need clean evidence separating prompt-assisted Roslyn usage from no-recipe tool-presence usage. Current treatment results mix command-surface discovery friction with prompt coaching effects.

## Constraints

- Do not modify pre-existing dirty tracked files in this session.
- Preserve control/treatment integrity (no control contamination).
- For project-shaped claims, require healthy workspace binding (`workspace_context.mode=workspace`) and treat `CS0518` core-type diagnostics as workspace-invalid.
- Treatment lanes fail closed if there are zero successful Roslyn calls.

## Non-Goals

- No broad architecture refactor.
- No report rewrite in this slice.

## Dependency Graph

- `N0` Harness readiness
  - Confirm paired harness/task availability and writable artifact output.
  - Deps: none.
- `N1` Execute discovery arm baseline
  - Command path: `Run-PairedAgentRuns.ps1`
  - Task: `change-signature-named-args-v1`
  - Shape: `project`
  - Guidance profile: `skill-minimal`
  - Integrity: `-FailOnMissingTreatmentRoslynUsage`
  - Deps: `N0`.
- `N2` Compare against guided baseline
  - Compare with latest guided (`surgical`) run on same task.
  - Deps: `N1`.
- `N3` Add no-recipe arm support
  - Ensure harness has a true tool-presence profile (`tool-only-v1`) with no task recipe.
  - Deps: `N2`.
- `N4` Execute tool-only probe
  - Run paired bundle with `tool-only-v1` on `change-signature-named-args-v1`.
  - Deps: `N3`.
- `N5` Validate + compare A1/A2/A3/A2b
  - Extract `duration_seconds`, `total_tokens`, `command_round_trips`, Roslyn attempted/successful calls, and trajectory discovery/edit split metrics.
  - Deps: `N4`.

Critical path: `N0 -> N1 -> N2 -> N3 -> N4 -> N5`

## Acceptance Gates

- `N1`: run completes with control and treatment records; treatment has >=1 successful Roslyn call; no control contamination.
- `N3`: harness accepts `-RoslynGuidanceProfile tool-only-v1` and prompt text contains no task recipe steps.
- `N4`: tool-only paired run completes with valid artifacts.
- `N5`: A1/A2/A3/A2b comparison table captured with explicit interpretation note.

## Rollback/Fallback

- On transient infra failure: rerun once with same parameters.
- On repeated infra failure: stop expansion and log blocker against harness reliability.
- On valid but inconclusive evidence: proceed to replicate node before any claims.

## Execution Log

- 2026-02-19: `N3` complete. Added `tool-only-v1` guidance profile across CLI/MCP/LSP prompt builders in `Run-PairedAgentRuns.ps1`.
- 2026-02-19: `N4` complete. Executed paired bundle `20260219-arm-toolonly-v1-changesig` (task `change-signature-named-args-v1`) with passing control/treatment runs.
- 2026-02-19: `N5` active. Comparing A1/A2/A3 overhead and semantic-edit adoption signals.
- 2026-02-19: `N3` complete. Executed `discovery-lite-v1` bundle `20260219-arm-discovery-lite-v1-changesig` with passing control/treatment runs.
- 2026-02-19: `N5` updated. Added four-arm snapshot (`A1`/`A2`/`A3`/`A2b`) and identified overhead from verbose bootstrap/verification loops.
- 2026-02-19: next queued node is prompt tightening + telemetry hardening to distinguish semantic-edit mutation from text-patch mutation.
- 2026-02-19: ran replicate `20260219-arm-toolonly-v1-changesig-r2` (valid) and replicate `20260219-arm-discovery-lite-v1-changesig-r2` (invalid control constraints).
- 2026-02-19: reran discovery-lite as `20260219-arm-discovery-lite-v1-changesig-r3` (valid) to restore comparable A2b evidence.
- 2026-02-25: telemetry hardening complete. `Analyze-TrajectoryRoslynUsage.ps1` now captures direct `llmstxt` bootstrap calls and transcript-level mutation channel classification (`roslyn_semantic_edit` vs `text_patch_or_non_roslyn_edit` vs `no_mutation_observed`).
- 2026-02-25: re-analysis confirms treatment overhead story is partly discovery/path-choice driven:
  - `tool-only-v1` valid runs: `edit_like_calls=0`, `llmstxt` bootstrap observed, mutation channel classified as `text_patch_or_non_roslyn_edit`.
  - `discovery-lite-v1` valid runs: semantic mutation channel retained (`roslyn_semantic_edit=1`) with lower pre-edit churn than `skill-minimal`.
- 2026-02-25: next active node is prompt tightening (`N7`) to cap verification loops while preserving semantic mutation.
- 2026-02-25: N7 prep completed in harness. Added `discovery-lite-v2` profile across CLI/MCP/LSP prompt builders with explicit diagnostics cap (single conditional post-edit diagnostics call) and early-mutation guardrails.
